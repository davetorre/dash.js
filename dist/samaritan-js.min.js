function UUIDjs(){}UUIDjs.maxFromBits=function(a){return Math.pow(2,a)},UUIDjs.limitUI04=UUIDjs.maxFromBits(4),UUIDjs.limitUI06=UUIDjs.maxFromBits(6),UUIDjs.limitUI08=UUIDjs.maxFromBits(8),UUIDjs.limitUI12=UUIDjs.maxFromBits(12),UUIDjs.limitUI14=UUIDjs.maxFromBits(14),UUIDjs.limitUI16=UUIDjs.maxFromBits(16),UUIDjs.limitUI32=UUIDjs.maxFromBits(32),UUIDjs.limitUI40=UUIDjs.maxFromBits(40),UUIDjs.limitUI48=UUIDjs.maxFromBits(48),UUIDjs.randomUI04=function(){return Math.round(Math.random()*UUIDjs.limitUI04)},UUIDjs.randomUI06=function(){return Math.round(Math.random()*UUIDjs.limitUI06)},UUIDjs.randomUI08=function(){return Math.round(Math.random()*UUIDjs.limitUI08)},UUIDjs.randomUI12=function(){return Math.round(Math.random()*UUIDjs.limitUI12)},UUIDjs.randomUI14=function(){return Math.round(Math.random()*UUIDjs.limitUI14)},UUIDjs.randomUI16=function(){return Math.round(Math.random()*UUIDjs.limitUI16)},UUIDjs.randomUI32=function(){return Math.round(Math.random()*UUIDjs.limitUI32)},UUIDjs.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},UUIDjs.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},UUIDjs.paddedString=function(a,b,c){a=String(a),c=c?c:"0";var d=b-a.length;for(d;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},UUIDjs.prototype.fromParts=function(a,b,c,d,e,f){return this.version=c>>12&15,this.hex=UUIDjs.paddedString(a.toString(16),8)+"-"+UUIDjs.paddedString(b.toString(16),4)+"-"+UUIDjs.paddedString(c.toString(16),4)+"-"+UUIDjs.paddedString(d.toString(16),2)+UUIDjs.paddedString(e.toString(16),2)+"-"+UUIDjs.paddedString(f.toString(16),12),this},UUIDjs.prototype.toString=function(){return this.hex},UUIDjs.prototype.toURN=function(){return"urn:uuid:"+this.hex},UUIDjs.prototype.toBytes=function(){var a=this.hex.split("-"),b=[],c=0,d=0;for(d;d<a.length;d++){var e=0;for(e;e<a[d].length;e+=2)b[c++]=parseInt(a[d].substr(e,2),16)}return b},UUIDjs.prototype.equals=function(a){return a instanceof UUID?this.hex!==a.hex?!1:!0:!1},UUIDjs.getTimeFieldValues=function(a){var b=a-Date.UTC(1582,9,15),c=b/4294967296*1e4&268435455;return{low:1e4*(268435455&b)%4294967296,mid:65535&c,hi:c>>>16,timestamp:b}},UUIDjs._create4=function(){return(new UUIDjs).fromParts(UUIDjs.randomUI32(),UUIDjs.randomUI16(),16384|UUIDjs.randomUI12(),128|UUIDjs.randomUI06(),UUIDjs.randomUI08(),UUIDjs.randomUI48())},UUIDjs._create1=function(){var a=(new Date).getTime(),b=UUIDjs.randomUI14(),c=1099511627776*(1|UUIDjs.randomUI08())+UUIDjs.randomUI40(),d=UUIDjs.randomUI04(),e=0,f=.25;a!==e?(e>a&&b++,e=a,d=UUIDjs.randomUI04()):Math.random()<f&&9984>d?d+=1+UUIDjs.randomUI04():b++;var g=UUIDjs.getTimeFieldValues(e),h=g.low+d,i=4095&g.hi|4096;b&=16383;var j=b>>>8|128,k=255&b;return(new UUIDjs).fromParts(h,g.mid,i,j,k,c)},UUIDjs.create=function(a){return a=a||4,this["_create"+a]()},UUIDjs.fromTime=function(a,b){b=b?b:!1;var c=UUIDjs.getTimeFieldValues(a),d=c.low,e=4095&c.hi|4096;return b===!1?(new UUIDjs).fromParts(d,c.mid,e,0,0,0):(new UUIDjs).fromParts(d,c.mid,e,128|UUIDjs.limitUI06,UUIDjs.limitUI08-1,UUIDjs.limitUI48-1)},UUIDjs.firstFromTime=function(a){return UUIDjs.fromTime(a,!1)},UUIDjs.lastFromTime=function(a){return UUIDjs.fromTime(a,!0)},UUIDjs.fromURN=function(a){var b,c=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i;return b===c.exec(a)?(new UUIDjs).fromParts(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),parseInt(b[4],16),parseInt(b[5],16),parseInt(b[6],16)):null},UUIDjs.fromBytes=function(a){var b="",c=0,d=[4,2,2,2,6],e=0;if(a.length<5)return null;for(e;e<d.length;e++){var f=0;for(f;f<d[e];f++){var g=a[c++].toString(16);1===g.length&&(g="0"+g),b+=g}6!==d[e]&&(b+="-")}return UUIDjs.fromURN(b)},UUIDjs.fromBinary=function(a){var b=[],c=0;for(c;c<a.length;c++)if(b[c]=a.charCodeAt(c),b[c]>255||b[c]<0)throw new Error("Unexpected byte in binary data.");return UUIDjs.fromBytes(b)},function(a){"use strict";var b=function(a,c,d){return 1===arguments.length?b.get(a):b.set(a,c,d)};b._document=document,b._navigator=navigator,b.defaults={path:"/"},b.get=function(a){return b._cachedDocumentCookie!==b._document.cookie&&b._renewCache(),b._cache[a]},b.set=function(c,d,e){return e=b._getExtendedOptions(e),e.expires=b._getExpiresDate(d===a?-1:e.expires),b._document.cookie=b._generateCookieString(c,d,e),b},b.expire=function(c,d){return b.set(c,a,d)},b._getExtendedOptions=function(c){return{path:c&&c.path||b.defaults.path,domain:c&&c.domain||b.defaults.domain,expires:c&&c.expires||b.defaults.expires,secure:c&&c.secure!==a?c.secure:b.defaults.secure}},b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},b._getExpiresDate=function(a,c){switch(c=c||new Date,typeof a){case"number":a=new Date(c.getTime()+1e3*a);break;case"string":a=new Date(a)}if(a&&!b._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},b._generateCookieString=function(a,b,c){a=encodeURIComponent(a),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toGMTString():"",d+=c.secure?";secure":""},b._getCookieObjectFromString=function(c){for(var d={},e=c?c.split("; "):[],f=0;f<e.length;f++){var g=b._getKeyValuePairFromCookieString(e[f]);d[g.key]===a&&(d[g.key]=g.value)}return d},b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");return b=0>b?a.length:b,{key:decodeURIComponent(a.substr(0,b)),value:decodeURIComponent(a.substr(b+1))}},b._renewCache=function(){b._cache=b._getCookieObjectFromString(b._document.cookie),b._cachedDocumentCookie=b._document.cookie},b._areEnabled=function(){return b._navigator.cookieEnabled||"1"===b.set("cookies.js",1).get("cookies.js")},b.enabled=b._areEnabled(),"function"==typeof define&&define.amd?define(function(){return b}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.Cookies=b):window.Cookies=b}(),!function(){"use strict";function a(a,b){"addEventListener"in window?window.addEventListener(a,b,!1):"attachEvent"in window&&window.attachEvent("on"+a,b)}function b(a){return t+"["+v+"] "+a}function c(a){s&&"console"in window&&console.log(b(a))}function d(a){"console"in window&&console.warn(b(a))}function e(b){function e(){function e(){function a(a){return"true"===a?!0:!1}var c=b.data.substr(u).split(":");v=c[0],i=void 0!==c[1]?parseInt(c[1],g):i,l=void 0!==c[2]?a(c[2]):l,s=void 0!==c[3]?a(c[3]):s,q=void 0!==c[4]?parseInt(c[4],g):q,w=void 0!==c[5]?a(c[5]):w,f=void 0!==c[6]?a(c[6]):f,j=m("margin",c[7]),p=void 0!==c[8]?c[8].toLowerCase():p,h=c[9],k=c[10]}function m(a,b){return-1!==b.indexOf("-")&&(d("Negative CSS value ignored for "+a),b=""),b}function n(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,c("Body "+a+" set to "+b))}function r(){void 0===j&&(j=i+"px"),n("margin",j)}function t(){document.documentElement.style.height="auto",document.body.style.height="auto",c('HTML & body height set to "auto"')}function x(){a("resize",function(){B("resize","Window resized")})}function y(){a("click",function(){B("click","Window clicked")})}function z(){o!==p&&c("Height calculation method set to "+p+"Height")}function A(){!0===f?(x(),y(),F()):c("Auto Resize disabled")}c("Initialising iFrame"),e(),r(),n("background",h),n("padding",k),z(),t(),D(),A()}function B(a,b,d,e){function f(){function a(a){function b(a){var b=/^\d+(px)?$/i;if(b.test(a))return parseInt(a,g);var d=c.style.left,e=c.runtimeStyle.left;return c.runtimeStyle.left=c.currentStyle.left,c.style.left=a||0,a=c.style.pixelLeft,c.style.left=d,c.runtimeStyle.left=e,a}var c=document.body,d=0;return d=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,null)[a]:b(c.currentStyle[a]),parseInt(d,g)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}function h(){return document.documentElement.scrollHeight}function i(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)}function j(){c("Trigger event ("+b+") cancelled"),setTimeout(function(){r=a},z)}function k(){c("Trigger event: "+b),r=a}function n(){m=q,A=s,k(),C(m,A,a)}var o={offset:f,scroll:h},q=void 0!==d?d:o[p](),s=void 0!==e?e:i();r in{size:1,interval:1}&&"resize"===a?j():(m!==q||l&&A!==s)&&n()}function C(a,b,d,e,f){function g(){void 0===f?f=x:c("Message targetOrigin: "+f)}function h(){var g=v+":"+a+":"+b+":"+d+(void 0!==e?":"+e:"");c("Sending message to host page ("+g+")"),y.postMessage(t+g,f)}g(),h()}function D(){w&&(c("Enable public methods"),window.parentIFrame={close:function(){B("close","window.parentIFrame.close()",0,0)},getId:function(){return v},sendMessage:function(a,b){C(0,0,"message",a,b)},setTargetOrigin:function(a){c("Set targetOrigin: "+a),x=a},size:function(a,b){var c=""+(a?a:"")+(b?","+b:"");B("size","window.parentIFrame.size("+c+")",a,b)}})}function E(){0!==q&&(c("setInterval: "+q+"ms"),setInterval(function(){B("interval","setInterval: "+q)},Math.abs(q)))}function F(){function a(){var a=document.querySelector("body"),d={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},e=new b(function(a){B("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type)});c("Enable MutationObserver"),e.observe(a,d)}var b=window.MutationObserver||window.WebKitMutationObserver;b?0>q?E():a():(d("MutationObserver not supported in this browser!"),E())}function G(){return t===""+b.data.substr(0,u)}G()&&n&&(e(),B("init","Init message from host page"),n=!1)}var f=!0,g=10,h="",i=0,j="",k="",l=!1,m=1,n=!0,o="offset",p=o,q=32,r="",s=!1,t="[iFrameSizer]",u=t.length,v="",w=!1,x="*",y=window.parent,z=50,A=1;a("message",e)}(),function(){"use strict";window.namespace=function(a){for(var b,c=window,d=a.split(".");b=d.shift();)c[b]=c[b]||{},c=c[b]}}(window._),namespace("Browser"),function(){"use strict";Browser.Location={change:function(a){window.location.replace(a)},hash:function(){return window.location.hash},reload:function(){window.location.reload()}},Browser.open=function(a,b){return window.open(a,"_blank",b)},Browser.setTimeout=function(a,b){return window.setTimeout(a,b)},Browser.setInterval=function(a,b){return window.setInterval(a,b)},Browser.isInIframe=function(){try{return window.self!==window.top}catch(a){return!0}},Browser.scrollTo=function(a,b,c){Browser.isInIframe()?window.top.postMessage("scrollTo:"+b,c||"*"):window.scrollTo(a,b)}}(),namespace("SamaritanJs.Scroll"),function(){"use strict";SamaritanJs.Scroll.toElement=function(a,b,c){var c;null==c&&(c=10);var d=$(a).offset()||{top:0},e=d.top,f=e-c;Browser.scrollTo(0,f,b)}}(),namespace("SamaritanJs.OAuth"),function(a){"use strict";SamaritanJs.OAuth.Cookie={names:{redirect:"SamaritanJsOAuthRedirect",state:"SamaritanJsOAuthState",token:"SamaritanJsOAuthToken"},set:function(b,c,d){return a.set(b,c,d)},get:function(b){return a.get(b)},expire:function(b){return a.expire(b)}}}(Cookies),namespace("SamaritanJs.OAuth"),function(){"use strict";SamaritanJs.OAuth.Params=function(a){this.queryString=a,this.queryStringToObject=function(){var a={},b=this.queryString.slice(1).split("&");return b.forEach(function(b){var c=b.split("=");a[c[0]]=c[1]}),a},this.get=function(a){return this.queryStringToObject()[a]}}}(),namespace("SamaritanJs.OAuth"),function(a,b){"use strict";SamaritanJs.OAuth.UrlGenerator=function(c){this.baseUrl=c.baseUrl,this.clientId=c.clientId||"smi_platform",this.context=c.context,this.redirectUrl=c.redirectUrl,this.responseType=c.responseType,this.scopes=c.scopes||["identity","needs","profile","membership","enroll"],this.generate=function(){var c=a.create().hex,d=b.param({scope:this.scopes.join(" "),state:c,redirect_uri:this.redirectUrl,client_id:this.clientId,response_type:this.responseType,context:this.context});return{url:this.baseUrl+"?"+d,state:c}}}}(UUIDjs,jQuery),namespace("SamaritanJs.OAuth"),function(a){"use strict";SamaritanJs.OAuth.TokenAccessor={set:function(b,c,d){d=parseInt(d),a.set(this.key(b),c,{expires:d}),null!=d?a.set(this.expiresInKey(b),this._futureUnixTime(d),{expires:d}):this.expireExpiresIn(b)},get:function(b){return a.get(this.key(b))},_futureUnixTime:function(a){var b=1e3*parseInt(a);return new Date(Date.now()+b).valueOf()},getExpiresIn:function(b){var c=parseInt(a.get(this.expiresInKey(b)));return isNaN(c)?1/0:(c-Date.now())/1e3},expire:function(b){a.expire(this.key(b)),this.expireExpiresIn(b)},expireExpiresIn:function(b){a.expire(this.expiresInKey(b))},prefix:"smi-access-token:",expiresInPrefix:"smi-access-token-expiration:",key:function(a){return""+this.prefix+a},expiresInKey:function(a){return""+this.expiresInPrefix+a},expireAll:function(a){var b=this;$.each(a,function(a,c){b.expire(c)})}}}(SamaritanJs.OAuth.Cookie),namespace("SamaritanJs.OAuth"),function(){"use strict";SamaritanJs.OAuth.TokenRefreshIframe=function(a){this.modalDataId="refresh-modal",this.$el=$('<iframe data-id="'+this.modalDataId+'" src="'+a+'"></iframe>'),this.render=function(){this.$el.hide(),$("body").append(this.$el)},this.remove=function(){this.$el.remove()}}}(),namespace("SamaritanJs.OAuth"),function(a){"use strict";SamaritanJs.OAuth.TokenValidator=function(b,c,d){this.expiration=d,this.state=b,this.token=c,this.isValidState=function(){return a.get(a.names.state)===this.state},this.storeToken=function(){return a.set(a.names.token,this.token,{expires:this.expiration})},this.removeToken=function(){return a.expire(a.names.token)},this.storedToken=function(){return a.get(a.names.token)},this.hasStoredToken=function(){return void 0!==a.get(a.names.token)}}}(SamaritanJs.OAuth.Cookie),namespace("SamaritanJs.OAuth"),function(a,b){"use strict";SamaritanJs.OAuth.AccessRequester=function(c){var d=300;this.urlGenerator=c,this.requestAccess=function(){var a=this.urlGenerator.generate();this.storeState(a.state),this.sendRequest(a.url)},this.storeState=function(b){a.set(a.names.state,b,{expires:d})},this.sendRequest=function(a){b.Location.change(a)}}}(SamaritanJs.OAuth.Cookie,Browser),namespace("SamaritanJs.OAuth"),function(){"use strict";var a=function(a,b){return function(){return a.apply(b,arguments)}};SamaritanJs.OAuth.AutoRefresh=function(){function b(b,c,d){this.appId=b,this.urlGenerator=c,this.shouldShowCallback=d,this.refreshLocation=a(this.refreshLocation,this)}return b.prototype.modalDataId="refresh-modal",b.prototype.checkForTokenInterval=200,b.prototype.maxWaitForToken=6e3,b.prototype.register=function(){var a,b,c=this;return a=SamaritanJs.OAuth.TokenAccessor.getExpiresIn(this.appId),b=1e3*a,this.timeoutId=Browser.setTimeout(function(){return c.trigger()},b)},b.prototype.trigger=function(){return this.shouldShowModal()?(this.cleanUp(),this.renderModal()):void 0},b.prototype.renderModal=function(){var a=this;SamaritanJs.OAuth.TokenAccessor.expire(this.appId),SamaritanJs.OAuth.Cookie.set("isAutoRefresh","true",10);var b=this.urlGenerator.generate();return(new SamaritanJs.OAuth.AccessRequester).storeState(b.state),this.modal=this.createModal(b.url),this.modal.render(),this.refreshPageTimeoutId=Browser.setTimeout(function(){a.refreshLocation(b.url)},this.maxWaitForToken),this.intervalId=Browser.setInterval(function(){return a.closeModal()},this.checkForTokenInterval)},b.prototype.createModal=function(a){return new SamaritanJs.OAuth.TokenRefreshIframe(a)},b.prototype.refreshLocation=function(a){return SamaritanJs.OAuth.AutoRefresh.expireFlag(),Browser.Location.change(a)},b.prototype.closeModal=function(){return void 0!=SamaritanJs.OAuth.TokenAccessor.get(this.appId)?(this.cleanUp(),this.register()):void 0},b.prototype.cleanUp=function(){var a;return clearTimeout(this.timeoutId),clearTimeout(this.refreshPageTimeoutId),clearInterval(this.intervalId),null!=(a=this.modal)?a.remove():void 0},b.prototype.shouldShowModal=function(){return void 0!=this.shouldShowCallback?this.shouldShowCallback():!0},b.expireFlag=function(){return SamaritanJs.OAuth.Cookie.expire("isAutoRefresh")},b.isFlagSet=function(){return void 0!=SamaritanJs.OAuth.Cookie.get("isAutoRefresh")},b}()}.call(this),namespace("SamaritanJs.OAuth"),function(){"use strict";SamaritanJs.OAuth.Response=function(a){this.normalizedLocationHash=function(a){var b;return b=a.split("#"),2===b.length?"?"+b[1]:3===b.length?"?"+b[2]:void 0},this.params=new SamaritanJs.OAuth.Params(this.normalizedLocationHash(a)),this.token=function(){return this.params.get("access_token")},this.context=function(){return this.params.get("context")},this.expiresIn=function(){return this.params.get("expires_in")},this.isValidState=function(){var a,b,c;return b=this.params.get("state"),a=this.params.get("expires_in"),c=new SamaritanJs.OAuth.TokenValidator(b,this.token(),a),c.isValidState()}}}();